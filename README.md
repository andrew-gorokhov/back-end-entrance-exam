# API Cache Project

Этот проект представляет собой REST API для получения и кэширования данных о погоде. В проекте реализована работа с in-memory кэшем для хранения данных о погоде и управление этим кэшем.

## Содержание

- [Описание](#описание)
- [Функциональные возможности](#функциональные-возможности)
- [Установка и запуск](#установка-и-запуск)
- [Использование API](#использование-api)
- [Документация Swagger](#документация-swagger)
- [Тестирование](#тестирование)
- [Лицензия](#лицензия)

## Описание

Этот проект предоставляет API для получения погодных данных и управления кэшем, используемым для хранения этих данных. В проекте реализованы функции для:

- Получения и обновления данных о погоде.
- Управления размером и содержимым кэша.

## Функциональные возможности

### Управление кэшем

- Очистка кэша
- Изменение размера кэша
- Получение размера кэша
- Получение количества записей в кэше
- Получение всех записей в кэше
- Обновление одной записи в кэше
- Обновление всех записей в кэше

### Получение погодных данных

- Получение текущих данных о погоде для указанного города

## Установка и запуск

1. Клонируйте репозиторий:

    ```bash
    git clone https://github.com/andrew-gorokhov/back-end-entrance-exam.git
    ```

2. Перейдите в директорию проекта:

    ```bash
    cd back-end-entrance-exam
    ```

3. Установите зависимости:

    ```bash
    npm install
    ```

4. Создайте файл `.env` в корне проекта и добавьте в него необходимые переменные окружения:

    ```
    PORT=4698
    WEATHER_URL='https://goweather.herokuapp.com/weather/'
    ```

5. Запустите сервер:

    ```bash
    npm start
    ```

## Использование API

### Управление кэшем

- **Очистка кэша**

    ```http
    POST /api/cache/clear
    ```

    Возвращает: `200 OK`

- **Изменение размера кэша**

    ```http
    POST /api/cache/size
    Content-Type: application/json

    {
      "size": 100
    }
    ```

    Возвращает: `200 OK`

- **Получение размера кэша**

    ```http
    GET /api/cache/size
    ```

    Возвращает:

    ```json
    {
      "size": 100
    }
    ```

- **Получение количества записей в кэше**

    ```http
    GET /api/cache/count
    ```

    Возвращает:

    ```json
    {
      "count": 10
    }
    ```

- **Получение всех записей в кэше**

    ```http
    GET /api/cache/entries
    ```

    Возвращает:

    ```json
    {
      "entries": [
        ["city1", { "temperature": 25, "wind": 10, "description": "Sunny" }],
        ["city2", { "temperature": 18, "wind": 5, "description": "Cloudy" }]
      ]
    }
    ```

- **Обновление одной записи в кэше**

    ```http
    PUT /api/cache/entry
    Content-Type: application/json

    {
      "key": "city1"
    }
    ```

    Возвращает: `200 OK`

- **Обновление всех записей в кэше**

    ```http
    PUT /api/cache/entries
    Content-Type: application/json

    {
      "entries": [
        { "key": "city1" },
        { "key": "city2" }
      ]
    }
    ```

    Возвращает: `200 OK`

### Получение погодных данных

- **Получение данных о погоде для города**

    ```http
    GET /api/weather/{city}
    ```

    Возвращает:

    ```json
    {
      "temperature": 25,
      "wind": 10,
      "description": "Sunny"
    }
    ```

## Документация Swagger

Документация API доступна по адресу:

http://localhost:4698/api-docs

## Тестирование

Вы можете использовать Insomnia или любой другой инструмент для тестирования API для проверки функциональности.
